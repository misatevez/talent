(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3845],{8242:function(e,a,s){Promise.resolve().then(s.bind(s,6477))},6477:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var l=s(7437),t=s(2265),i=s(8156),n=s(7330);s(1262);var r=s(7445),c=s(6708),o=s(1396),d=s.n(o),u=s(7415);s(3063);var m=s(4033);function x(e){let{id_evaluacion:a}=e,[s,o]=(0,t.useState)([]),[x,h]=(0,t.useState)(!1),[f,v]=(0,t.useState)(!1),[b,j]=(0,t.useState)([]),[p,g]=(0,t.useState)({}),N=(0,m.useRouter)(),[w,_]=(0,t.useState)({visible:!1,titulo:"",mensaje:""}),y=async e=>{e.preventDefault(),console.log(p);let{data:a,error:s}=await n.Z.from("temas").update({id_evaluacion:p.id_evaluacion}).eq("id_tema",p.id_tema);v(e=>!e),s?_({visible:!0,titulo:"Error",mensaje:"Vuelva a intentar mas tarde: "+s.message}):_({visible:!0,titulo:"\xc9xito",mensaje:"Se asignado el tema a la evaluacion"})};(0,t.useEffect)(()=>{(async()=>{let{data:e,error:s}=await n.Z.from("evaluaciones").select("*").eq("id_evaluacion",a).single();s?console.log(s):(o(e),h(!0),g(e=>({...e,id_evaluacion:a})))})()},[f]),(0,t.useEffect)(()=>{x&&(async()=>{let{data:e,error:s}=await n.Z.from("temas").select("nombre, id_tema").eq("id_evaluacion",a);s?console.log(s):(console.log("Esto es data de temas:",e),j(e))})()},[x,f,a]);let S=e=>{let{name:a,value:s}=e.target;g(e=>({...e,[a]:s}))},k=async(e,a)=>{let{error:s}=await n.Z.from("temas").update({id_evaluacion:null}).match({id_evaluacion:e,id_tema:a});v(e=>!e),s?_({visible:!0,titulo:"Error",mensaje:"Vuelva a intentar m\xe1s tarde: "+s.message}):_({visible:!0,titulo:"\xc9xito",mensaje:"Se elimin\xf3 la relaci\xf3n del tema con la evaluaci\xf3n"})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex w-full h-full",children:[(0,l.jsx)("div",{className:"w-1/2 p-4",children:(0,l.jsx)("div",{className:"p-8 mx-auto w-full max-w-3xl",children:(0,l.jsx)("form",{onSubmit:y,className:"rounded-lg shadow-lg",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-inner m-auto text-start",children:[(0,l.jsx)("h1",{className:"text-center text-xl font-bold",children:"Asignar tema a evaluacion"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 mt-6",children:[(0,l.jsx)("div",{className:"flex flex-col m-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-semibold",htmlFor:"group-name",children:"Nombre de evaluacion:"}),(0,l.jsxs)("span",{className:"text-sm",children:[" ",s.nombre," "]})]})}),(0,l.jsx)("div",{className:"flex flex-col m-2",children:(0,l.jsx)(c.Z,{selectedTipoId:p.id_tema,onGrupoTipoChange:e=>{S({target:{name:"id_tema",value:e}})}})})]}),(0,l.jsxs)("span",{className:"text-sm font-bold mt-4  text-gray-800",children:["\xbfTodavia no ha creado el tema para esta evaluacion? ",(0,l.jsx)(d(),{className:"text-blue-500 underline",href:"/dashboard/evaluaciones/temas/creartema",children:"Crear tema"})," "]}),(0,l.jsx)("div",{className:"flex justify-around mt-4",children:(0,l.jsx)(r.z,{type:"submit",className:"bg-blue-500 text-white",variant:"default",children:"Asignar"})})]})})})}),(0,l.jsx)("div",{className:"w-1/2 p-4 ",children:(0,l.jsxs)("div",{className:"p-8 space-y-8 mt-8 mb-8 mx-auto max-w-7xl  rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-center text-xl font-bold",children:"Temas asignados a esa evaluacion"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-bold mb-4",children:"Evaluacion: "}),s.nombre]}),(0,l.jsx)("div",{className:"space-y-4 text-center",children:(0,l.jsxs)(u.iA,{children:[(0,l.jsx)(u.xD,{children:(0,l.jsxs)(u.SC,{children:[(0,l.jsx)(u.ss,{children:"Tema"}),(0,l.jsx)(u.ss,{children:"Accion"}),(0,l.jsx)(u.ss,{children:"Preguntas"})]})}),(0,l.jsx)(u.RM,{children:b.map((e,a)=>(0,l.jsxs)(u.SC,{children:[(0,l.jsx)(u.pj,{children:e.nombre}),(0,l.jsxs)(u.pj,{children:[(0,l.jsx)(r.z,{onClick:()=>N.push("/dashboard/evaluaciones/temas/".concat(e.id_tema)),className:"w-1/2",type:"submit",children:"Edit"}),(0,l.jsx)(r.z,{onClick:()=>k(s.id_evaluacion,e.id_tema),className:"w-1/2",type:"submit",children:"Delete"})]}),(0,l.jsx)(u.pj,{children:(0,l.jsx)(r.z,{onClick:()=>N.push("/dashboard/evaluaciones/preguntas/crearpregunta/".concat(e.id_tema)),className:"w-1/2",type:"submit",children:"Ver preguntas"})})]},a))})]})})]})})]}),w.visible&&(0,l.jsx)(i.U,{titulo:w.titulo,mensaje:w.mensaje,visible:w.visible,onClose:()=>{_(e=>({...e,visible:!1}))}})]})}},1262:function(e,a,s){"use strict";s.d(a,{I:function(){return n}});var l=s(7437),t=s(2265),i=s(8243);let n=t.forwardRef((e,a)=>{let{className:s,type:t,...n}=e;return(0,l.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...n})});n.displayName="Input"},1396:function(e,a,s){e.exports=s(5250)},4033:function(e,a,s){e.exports=s(5313)}},function(e){e.O(0,[7895,4799,577,4997,8434,5010,2971,4938,1744],function(){return e(e.s=8242)}),_N_E=e.O()}]);